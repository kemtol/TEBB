<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>$BBBET Democratize Sportbooking!</title>
    <!-- ‚úÖ Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- ‚úÖ jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- ‚úÖ Hammer.js (untuk swipe) -->
    <script src="https://hammerjs.github.io/dist/hammer.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="d-flex justify-content-center align-items-center vh-100">
    <!-- landing screen -->
    <section
      id="landing-screen"
      class="screen container text-center d-flex flex-column align-items-center vh-100"
    >
      <div class="w-100 mt-4 pb-4 pt-4 border-bottom">
        <h2>Democratize Sportbooking!</h2>
        <h1>$BBBET</h1>
        <p class="lead mb-4">
          #1 Blockchain dApp for sport gaming <br />
          We The House üëä
        </p>
        <button id="go-to-register" class="btn btn-primary btn-md mb-4 fw-bold">
          GET INVITED
        </button>
        <br />
        <small>only people with knowledge in blockchain invited.</small>
      </div>
      <!-- Member List -->
      <div class="container pt-4 pb-4 border-bottom">
        <div class="row">
          <div class="col-12 d-flex flex-wrap justify-content-center gap-1">
            <a href="#">
              <img
                src="img/banner-welcome.jpg"
                alt="decentralize Sportbooking"
                class="w-75"
              />
            </a>
          </div>
        </div>
      </div>
      <!-- Sugar Daddy Perks -->
      <div class="container pt-4 pb-4 border-bottom">
        <h4 class="text-center mb-4 fw-bold">We The House Means</h4>
        <div class="row">
          <div class="col-6">
            <h5 class="fw-bold">True Ownership</h5>
            <p>
              All bets, winnings, and data are stored on-chain. No third
              parties, no compromises.
            </p>
          </div>
          <div class="col-6">
            <h5 class="fw-bold">Transparent Odds</h5>
            <p>
              Powered by smart contracts‚Äîfair, provable, and tamper-proof
              results every time.
            </p>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-6">
            <h5 class="fw-bold">Instant Payouts</h5>
            <p>
              Winnings are sent directly to your wallet. No delays, no
              withdrawal requests.
            </p>
          </div>
          <div class="col-6">
            <h5 class="fw-bold">Global & Borderless</h5>
            <p>
              Bet from anywhere, anytime. All you need is a wallet‚Äîno KYC
              required.
            </p>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-6">
            <h5 class="fw-bold">Community-Driven</h5>
            <p>
              Hold $BBBET and participate in DAO governance. Help shape the
              future of betting.
            </p>
          </div>
          <div class="col-6">
            <h5 class="fw-bold">Democratize Sportbooking!</h5>
            <p>
              Compete in leaderboards, earn NFT rewards, and unlock exclusive
              perks.
            </p>
          </div>
        </div>
      </div>
      <!-- spplash screen -->
      <div
        id="preview-screen"
        class="container pt-4 pb-4 border-bottom text-center"
      >
        <!-- Match Item -->
        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-nowrap"><span class="mdate d-block">
              12/04</span>18:30
            </div>
            <div class="flex-grow-1 text-middle fw-bold">Manchester City vs Fulham</div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <!-- Repeat for each match -->
        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-nowrap"><span class="mdate d-block">
              12/04</span>20:00
            </div>
            <div class="flex-grow-1 text-middle fw-bold">
              Crystal Palace vs Leeds United
            </div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-nowrap"><span class="mdate d-block">
              12/04</span>20:00
            </div>
            <div class="flex-grow-1 text-middle fw-bold">Brighton vs Burnley</div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-nowrap"><span class="mdate d-block">
              12/04</span>20:00
            </div>
            <div class="flex-grow-1 text-middle fw-bold">
              Leicester City vs Newcastle United
            </div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-nowrap"><span class="mdate d-block">
              12/04</span>23:30
            </div>
            <div class="flex-grow-1 text-middle fw-bold">
              Nottingham Forest vs Bournemouth
            </div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <!-- TBD entries -->
        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-warning me-3 text-nowrap fw-bold">TBD</div>
            <div class="flex-grow-1 text-middle fw-bold">Everton vs West Ham United</div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-warning me-3 text-nowrap fw-bold">TBD</div>
            <div class="flex-grow-1 text-middle fw-bold">Southampton vs Wolverhampton</div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-warning me-3 text-nowrap fw-bold">TBD</div>
            <div class="flex-grow-1 text-middle fw-bold">
              Aston Villa vs Sheffield United
            </div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-warning me-3 text-nowrap fw-bold">TBD</div>
            <div class="flex-grow-1 text-middle fw-bold">Arsenal vs Luton Town</div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>

        <div class="col-12 m-2">
          <div
            class="matches rounded p-2 d-flex align-items-center justify-content-between"
          >
            <div class="match-date text-warning me-3 text-nowrap fw-bold">TBD</div>
            <div class="flex-grow-1 text-middle fw-bold">Brentford vs Chelsea</div>
            <div class="ms-2">
              ü§ù
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- register screen -->
    <section id="register-screen" class="screen container d-none">
      <div class="w-100">
        <h1 class="mb-4 fs-2 fw-normal">We Use Solana Wallets as Identity</h1>
        <p class="lead mb-4 text-center d-none">
          Connect your wallet to start matching!
        </p>
        <!-- Dynamic Wallet Buttons -->
        <div
          id="wallet-buttons"
          class="d-flex flex-wrap justify-content-center mb-3"
        ></div>
        <!-- Step Info: Install Wallet Guide -->
        <div id="install-wallet-guide" class="d-none text-center">
          <h5 class="text-danger alert alert-warning fs-6">
            üîí Wallet Not Detected
          </h5>
          <p class="m-3 p-3">
            To continue, Phantom wallet depending on your browser or device:
          </p>
          <div class="d-grid gap-2 mb-3">
            <a
              href="https://chromewebstore.google.com/detail/phantom/bfnaelmomeimhlpmgjnjophhpkkoljpa"
              target="_blank"
              class="btn btn-dark"
              >üîó Chrome</a
            >
            <a
              href="https://addons.mozilla.org/en-US/firefox/addon/phantom-app/"
              target="_blank"
              class="btn btn-warning"
              >ü¶ä Firefox</a
            >
            <a
              href="https://apps.apple.com/app/phantom-solana-wallet/id1598432977"
              target="_blank"
              class="btn btn-primary"
              >üì± iPhone / iPad</a
            >
            <a
              href="https://play.google.com/store/apps/details?id=app.phantom"
              target="_blank"
              class="btn btn-success"
              >üì± Android</a
            >
          </div>
          <div class="text-center">
            <p class="m-3 p-3">Already installed your wallet?</p>
            <button
              class="btn btn-outline-primary btn-md mb-3"
              id="retry-connect"
            >
              Refresh
            </button>
          </div>
        </div>
        <!-- Wallet Address Display -->
        <div
          id="wallet-address"
          class="mb-4 d-none text-success text-center fw-bold small"
        ></div>
        <!-- Optional Profile Form -->
        <form id="profile-form" class="d-none text-start" autocomplete="off">
          <div class="mb-3">
            <label
              for="username"
              class="form-label d-block text-center d-none"
              style="color: #dc3545"
              >Lets Start LLUV</label
            >
            <input
              type="text"
              id="username"
              class="form-control"
              placeholder="Display Name"
              required
            />
          </div>
          <!--<div class="mb-3">
            <textarea
              id="bio"
              class="form-control"
              placeholder="Short Bio (optional)"
            ></textarea>
          </div>
          <div class="mb-3">
            <input
              type="url"
              id="profile-image"
              class="form-control"
              placeholder="Profile Image URL (optional)"
            />
          </div>-->
          <button type="submit" class="btn btn-primary w-100">
            Save Profile
          </button>
        </form>
        <!-- Back Button -->
        <a
          href="#"
          id="back-to-login"
          class="d-block text-center mt-3 text-decoration-none"
        >
          &larr; Back to landing page
        </a>
      </div>
    </section>
    <!-- Matching Screen -->
    <section id="matching-screen" class="container d-none vh-100">
      <div class="mb-3">
        <div class="card-container position-relative">
          <!-- Cards will be generated dynamically -->
        </div>
      </div>
      <!-- Chat Screen -->
      <div id="chat-screen" class="container d-none">
        <button id="back-to-swipe" class="btn mt-2">
          <span>x</span>
        </button>
        <div class="d-flex align-items-center pt-2 mt-2 pb-2 mb-2">
          <img id="chat-avatar" src="" class="rounded-circle me-2" width="50" />
          <h2 id="chat-name" class="mb-0 flex-grow-1"></h2>
        </div>
        <div
          id="chat-messages"
          class="border-white p-3 mb-3 bg-white rounded d-flex"
        ></div>
        <div class="input-group">
          <input
            type="text"
            id="chat-input"
            class="form-control border-white"
            placeholder="Type a message..."
          />
          <button id="send-message" class="btn btn-primary">Send</button>
        </div>
      </div>
    </section>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JavaScript -->
    <script src="script.js"></script>
    <!-- wallet detector-->
    <script>
      $(document).ready(function () {
        const $walletButtons = $("#wallet-buttons");
        const $walletAddress = $("#wallet-address");
        const $profileForm = $("#profile-form");
        const $installGuide = $("#install-wallet-guide");
        let detectedWallets = 0;
        async function connectToWallet(walletProvider, name) {
          try {
            console.log(`[${name}] Connecting...`);
            const res = await walletProvider.connect();
            const address = res.publicKey.toString();
            console.log(`[${name}] Connected address: ${address}`);
            $walletAddress
              .html(
                `<div class="dblock p-1 m-1">${name} Connected!</div> <div class="dblock p-2 m-2" style="overflow-x:auto;color:black">${address}</div>`
              )
              .removeClass("d-none");
            localStorage.setItem("walletAddress", address);
            $profileForm.removeClass("d-none");
            $walletButtons
              .find("button")
              .prop("disabled", true)
              .text(`${name} Connected`);
          } catch (err) {
            alert(`Gagal connect ke ${name}.`);
            console.error(`[${name}] Error saat connect:`, err);
          }
        }

        function detectWallets() {
          $walletButtons.empty();
          detectedWallets = 0;
          if (window.solana && window.solana.isPhantom) {
            $walletButtons.append(`
			<button class="btn btn-dark me-2 mb-2" id="connect-phantom">Connect Phantom</button>`);
            detectedWallets++;
          }
          if (window.solflare) {
            $walletButtons.append(`
			<button class="btn btn-warning me-2 mb-2" id="connect-solflare">Connect Solflare</button>`);
            detectedWallets++;
          }
          if (window.backpack && window.backpack.solana) {
            $walletButtons.append(`
			<button class="btn btn-info me-2 mb-2" id="connect-backpack">Connect Backpack</button>`);
            detectedWallets++;
          }
          if (detectedWallets === 0) {
            $installGuide.removeClass("d-none");
          } else {
            $installGuide.addClass("d-none");
          }
        }
        // Delegated event listeners supaya bisa trigger tombol yang di-append
        $(document).on("click", "#connect-phantom", () =>
          connectToWallet(window.solana, "Phantom")
        );
        $(document).on("click", "#connect-solflare", () =>
          connectToWallet(window.solflare, "Solflare")
        );
        $(document).on("click", "#connect-backpack", () =>
          connectToWallet(window.backpack.solana, "Backpack")
        );
        // Cek ulang setelah delay (phantom kadang lambat inject)
        setTimeout(() => {
          detectWallets();
        }, 1000);
        const storedAddress = localStorage.getItem("walletAddress");
        if (storedAddress) {
          $walletAddress
            .html(
              `<div class="d-block p-1 m-1">Your Wallet</div><div class="d-block p-2 m-2" style="color:black;overflow-x:auto">${storedAddress}</div>`
            )
            .removeClass("d-none");
          $profileForm.removeClass("d-none");
          $walletButtons
            .find("button")
            .prop("disabled", true)
            .text("Wallet Connected");
        }
        // Event untuk tombol "Retry"
        $(document).on("click", "#retry-connect", function () {
          detectWallets();
        });
      });
    </script>
  </body>
</html>
